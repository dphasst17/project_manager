(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{259:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var s=a(5155);let l=e=>{let{title:t,description:a,tag:l}=e;return(0,s.jsxs)("div",{className:"card",children:[(0,s.jsxs)("div",{className:"mac-header",children:[(0,s.jsx)("span",{className:"red"}),(0,s.jsx)("span",{className:"yellow"}),(0,s.jsx)("span",{className:"green"})]}),(0,s.jsx)("span",{className:"card-title",children:t}),(0,s.jsx)("div",{className:"tags",children:l.map(e=>(0,s.jsx)("span",{className:"card-tag mr-1",children:e},"tag-".concat(e)))}),(0,s.jsx)("div",{className:"code-editor",children:(0,s.jsx)("pre",{children:(0,s.jsx)("code",{children:a})})})]})}},944:(e,t,a)=>{"use strict";a.r(t),a.d(t,{completed:()=>r,in_progress:()=>l,not_started:()=>s});let s="Not Started",l="In Progress",r="Completed"},2033:(e,t,a)=>{Promise.resolve().then(a.bind(a,6492))},2173:(e,t,a)=>{"use strict";a.d(t,{Pz:()=>o,QA:()=>s,V_:()=>n,jv:()=>i,m$:()=>l,vF:()=>c,vr:()=>d,xQ:()=>r});let s=async(e,t,a)=>(await fetch("".concat("http://localhost:3001/api","/project?page=").concat(t||1,"&limit=").concat(a||10),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})).json(),l=async(e,t,a)=>(await fetch("".concat("http://localhost:3001/api","/project/task?page=").concat(t||1,"&limit=").concat(a||10),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})).json(),r=async(e,t)=>(await fetch("".concat("http://localhost:3001/api","/project/append"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(t)})).json(),n=async(e,t,a,s,l)=>(await fetch("".concat("http://localhost:3001/api","/project/task").concat("admin"===e?"/status":"/employee/status","?status=").concat(a,"&page=").concat(s||1,"&limit=").concat(l||10),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}})).json(),c=async e=>{let t=await fetch("".concat("http://localhost:3001/api","/project/detail/").concat(e));if(!t.ok)throw Error("Failed to fetch data");return t.json()},i=async(e,t,a)=>(await fetch("".concat("http://localhost:3001/api","/project/employee?page=").concat(t||1,"&limit=").concat(a||10),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})).json(),o=async(e,t)=>(await fetch("".concat("http://localhost:3001/api","/project"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(t)})).json(),d=async(e,t,a)=>(await fetch("".concat("http://localhost:3001/api","/project"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e,data:t,condition:a})})).json()},4630:(e,t,a)=>{"use strict";a.d(t,{RL:()=>c,Yg:()=>n,gg:()=>l,it:()=>r,oP:()=>i,xl:()=>s});let s=async(e,t,a)=>(await fetch("".concat("http://localhost:3001/api","/chat/admin?skip=").concat(a,"&limit=").concat(t),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})).json(),l=async(e,t,a)=>(await fetch("".concat("http://localhost:3001/api","/chat/employee?skip=").concat(a,"&limit=").concat(t),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})).json(),r=async(e,t,a)=>(await fetch("".concat("http://localhost:3001/api","/chat/detail/").concat(e,"?skip=").concat(a,"&limit=").concat(t),{method:"GET"})).json(),n=async(e,t,a)=>(await fetch("".concat("http://localhost:3001/api","/chat/images/").concat(e,"?skip=").concat(a,"&limit=").concat(t),{method:"GET"})).json(),c=async(e,t)=>(await fetch("".concat("http://localhost:3001/api","/chat"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(t)})).json(),i=async(e,t)=>(await fetch("".concat("http://localhost:3001/api","/chat/channel"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(t)})).json()},5048:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var s=a(5155),l=a(8543);let r=e=>{let{setFile:t}=e,a=e=>{let t=["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(e.type),a=[".xls",".xlsx",".csv"].includes(e.name.slice(e.name.lastIndexOf(".")).toLowerCase());return t||a},r=e=>{a(e)?t(e):l.oR.error("File is not Excel")};return(0,s.jsxs)("button",{className:"container-btn-file h-[32px]",children:[(0,s.jsx)("svg",{fill:"#fff",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 50 50",children:(0,s.jsx)("path",{d:"M28.8125 .03125L.8125 5.34375C.339844  5.433594 0 5.863281 0 6.34375L0 43.65625C0  44.136719 .339844 44.566406 .8125 44.65625L28.8125  49.96875C28.875 49.980469 28.9375 50 29 50C29.230469  50 29.445313 49.929688 29.625 49.78125C29.855469 49.589844  30 49.296875 30 49L30 1C30 .703125 29.855469 .410156 29.625  .21875C29.394531 .0273438 29.105469 -.0234375 28.8125 .03125ZM32  6L32 13L34 13L34 15L32 15L32 20L34 20L34 22L32 22L32 27L34 27L34  29L32 29L32 35L34 35L34 37L32 37L32 44L47 44C48.101563 44 49  43.101563 49 42L49 8C49 6.898438 48.101563 6 47 6ZM36 13L44  13L44 15L36 15ZM6.6875 15.6875L11.8125 15.6875L14.5 21.28125C14.710938  21.722656 14.898438 22.265625 15.0625 22.875L15.09375 22.875C15.199219  22.511719 15.402344 21.941406 15.6875 21.21875L18.65625 15.6875L23.34375  15.6875L17.75 24.9375L23.5 34.375L18.53125 34.375L15.28125  28.28125C15.160156 28.054688 15.035156 27.636719 14.90625  27.03125L14.875 27.03125C14.8125 27.316406 14.664063 27.761719  14.4375 28.34375L11.1875 34.375L6.1875 34.375L12.15625 25.03125ZM36  20L44 20L44 22L36 22ZM36 27L44 27L44 29L36 29ZM36 35L44 35L44 37L36 37Z"})}),"Upload File",(0,s.jsx)("input",{onChange:e=>r(e.target.files[0]),className:"file",name:"text",type:"file"})]})}},5261:(e,t,a)=>{"use strict";a.d(t,{I:()=>s});let s=(0,a(5453).v)(e=>({project:null,setProject:t=>e({project:t}),employeeProject:null,setEmployeeProject:t=>e({employeeProject:t})}))},6272:(e,t,a)=>{"use strict";a.d(t,{ApiProvider:()=>x,_:()=>u});var s=a(5155),l=a(2115),r=a(2923),n=a(5041),c=a(7005),i=a(4400),o=a(2173),d=a(2144),p=a(6821),m=a(5261),h=a(4630);let u=(0,l.createContext)({}),x=e=>{let{children:t}=e,[a,x]=(0,l.useState)(!0),{isLog:j,setChannel:f}=(0,l.use)(c.B),{employee:g,setEmployee:y,setAdminEmployee:N,setTeam:v}=(0,d.n)(),{setTask:b,setStatusTask:w}=(0,p.O)(),{setProject:C,setEmployeeProject:_}=(0,m.I)(),k=(0,n.n)({mutationFn:async e=>await (0,i.Vp)(e),onSuccess:e=>{200===e.status&&y(e.data[0])},onError:e=>{console.log(e)}}),T=(0,n.n)({mutationFn:async e=>{let[t,a,s,l,r]=await Promise.all([(0,o.jv)(e,1,10),(0,o.V_)("employee",e,"completed",1,12),(0,o.V_)("employee",e,"in_progress",1,12),(0,o.V_)("employee",e,"not_started",1,12),(0,h.gg)(e,20,0)]);return{project:t,completed_task:a,in_progress_task:s,not_started_task:l,chat:r}},onSuccess:e=>{let{project:t,completed_task:a,in_progress_task:s,not_started_task:l,chat:r}=e;200===r.status&&f(r.data),200===t.status&&_(t.data),200===a.status&&200===s.status&&200===l.status&&w({completed:a.data,in_progress:s.data,not_started:l.data})},onError:e=>{console.log(e)}}),P=(0,n.n)({mutationFn:async e=>{let[t,a,s,l,r]=await Promise.all([(0,o.QA)(e,1,10),(0,i.de)(e),(0,o.m$)(e,1,12),(0,i.JP)(e,1,15),(0,h.xl)(e,20,0)]);return{project:t,team:a,task:s,employee:l,chat:r}},onSuccess:e=>{200===e.chat.status&&f(e.chat.data),200===e.project.status&&C(e.project.data),200===e.team.status&&v(e.team.data),200===e.task.status&&b(e.task.data),200===e.employee.status&&N(e.employee.data)},onError:e=>{console.log(e)}});return(0,l.useEffect)(()=>{j?(x(!0),(async()=>{let e=await (0,r.gf)();e&&k.mutate(e)})()):x(!1)},[j]),(0,l.useEffect)(()=>{j&&g&&(async()=>{let e=await (0,r.gf)();e&&(g.author==Number("1")?P.mutate(e):T.mutate(e)),x(!1)})()},[j,g]),(0,s.jsx)(u.Provider,{value:{isPending:a},children:t})}},6492:(e,t,a)=>{"use strict";let s;a.r(t),a.d(t,{default:()=>er});var l=a(5155),r=a(2144),n=a(2523),c=a(10),i=a(2923),o=a(2177),d=a(8543),p=a(9958);let m=e=>{let{setIsOpen:t}=e,{register:a,handleSubmit:s}=(0,o.mN)(),r=async e=>{if(e.password!==e.confirm_password)return d.oR.error("Password does not match");let a=await (0,i.gf)();if(a){if(200!==(a&&await (0,p.KZ)(a,{current:e.current,new:e.password})).status)return d.oR.error("Update Password Failed");d.oR.success("Update Password Success"),t(!1)}};return(0,l.jsxs)(c.EO,{children:[(0,l.jsx)(c.r7,{children:"Change Password"}),(0,l.jsxs)("div",{className:"flex flex-col gap-y-2 text-white",children:[(0,l.jsx)(n.p,{type:"password",placeholder:"Current Password",...a("current")}),(0,l.jsx)(n.p,{type:"password",placeholder:"Password",...a("password")}),(0,l.jsx)(n.p,{type:"password",placeholder:"Confirm Password",...a("confirm_password")})]}),(0,l.jsxs)(c.ck,{children:[(0,l.jsx)(c.Rx,{className:"bg-blue-600 text-white",onClick:s(r),children:"Save"}),(0,l.jsx)(c.Zr,{className:"bg-red-600 border-none text-white",onClick:()=>t(!1),children:"Cancel"})]})]})};var h=a(2115);let u=()=>{let{employee:e}=(0,r.n)(),[t,a]=(0,h.useState)(!1);return(0,l.jsx)("div",{className:"account-info w-full h-full col-span-2",children:(0,l.jsxs)("div",{className:"w-full h-full grid grid-cols-2 gap-y-4 gap-x-2 text-white",children:[(0,l.jsx)(n.p,{type:"text",defaultValue:(null==e?void 0:e.first_name)||"",readOnly:!0,placeholder:"First Name"}),(0,l.jsx)(n.p,{type:"text",defaultValue:(null==e?void 0:e.last_name)||"",readOnly:!0,placeholder:"Last Name"}),(0,l.jsx)(n.p,{type:"text",defaultValue:(null==e?void 0:e.email)||"",readOnly:!0,placeholder:"Email",className:"col-span-2"}),(0,l.jsx)(n.p,{type:"text",defaultValue:(null==e?void 0:e.role)||"",readOnly:!0,placeholder:"Role",className:"col-span-1"}),(0,l.jsxs)(c.Lt,{open:t,onOpenChange:()=>a(!t),children:[(0,l.jsx)(c.tv,{className:"btn_create text-white cursor-pointer",children:"Change Password"}),(0,l.jsx)(m,{setIsOpen:a})]})]})})};var x=a(259),j=a(6821),f=a(944),g=a(7005);let y=e=>{let{content:t,handle:a}=e;return(0,l.jsx)("button",{onClick:a,className:"cursor-pointer transition-all bg-blue-500 text-white px-6 py-2 rounded-lg border-blue-600 border-b-[4px] hover:brightness-110 hover:-translate-y-[1px] hover:border-b-[6px] active:border-b-[2px] active:brightness-90 active:translate-y-[2px]",children:t})};var N=a(2173);let v=()=>{let{task:e,statusTask:t}=(0,j.O)(),{employee:a}=(0,r.n)(),[s,n]=(0,h.useState)([]),[c,o]=(0,h.useState)({total:0,limit:0,current:0,totalPage:0}),{isAdmin:d}=(0,h.use)(g.B);return(0,h.useEffect)(()=>{d?(e&&n(e.data),e&&o({total:e.total,limit:e.limit,current:e.page,totalPage:e.totalPage})):(t&&n(t.completed.data.map(e=>({...e,employee:a}))),t&&o({total:t.completed.total,limit:t.completed.limit,current:t.completed.page,totalPage:t.completed.totalPage}))},[e,a,t]),(0,l.jsxs)("div",{className:"h-full col-span-7 grid grid-cols-4 gap-2 p-1 rounded-md",children:[s.slice(0,c.current*c.limit).map(e=>(0,l.jsx)(x.A,{title:e.task_name,description:e.description,tag:["".concat(e.employee.first_name," ").concat(e.employee.last_name),e.due_date.split("T")[0].split("-").reverse().join("/"),f[e.status]]},e.task_id)),(0,l.jsxs)("div",{className:"col-span-4 flex justify-start",children:[c.totalPage>1&&c.current<c.totalPage&&(0,l.jsx)(y,{handle:()=>{if(c.current<c.totalPage){let e=s.length,t=async()=>{let e=await (0,i.gf)(),t=e&&await (d?(0,N.m$)(e,c.current+1,c.limit):(0,N.V_)("employee",e,"completed",c.current+1,c.limit));t&&200===t.status&&(n([...s,...t.data.data]),o({...c,current:c.current+1}))};e<c.limit*c.current?t():o({...c,current:c.current+1})}},content:"Load More"}),c.totalPage>1&&c.current===c.totalPage&&(0,l.jsx)(y,{handle:()=>{o({...c,current:1})},content:"Hide"})]})]})},b=e=>{let{name:t,role:a,email:s}=e;return(0,l.jsxs)("div",{className:"flex items-center p-3 w-72 h-28 bg-white rounded-md shadow-lg",children:[(0,l.jsx)("section",{className:"flex justify-center items-center w-14 h-14 rounded-full shadow-md bg-gradient-to-r from-[#F9C97C] to-[#A2E9C1] hover:from-[#C9A9E9] hover:to-[#7EE7FC] hover:cursor-pointer hover:scale-110 duration-300",children:(0,l.jsx)("svg",{viewBox:"0 0 15 15",className:"w-7 fill-gray-700",children:(0,l.jsx)("path",{d:"M7.5 0.875C5.49797 0.875 3.875 2.49797 3.875 4.5C3.875 6.15288 4.98124 7.54738 6.49373 7.98351C5.2997 8.12901 4.27557 8.55134 3.50407 9.31167C2.52216 10.2794 2.02502 11.72 2.02502 13.5999C2.02502 13.8623 2.23769 14.0749 2.50002 14.0749C2.76236 14.0749 2.97502 13.8623 2.97502 13.5999C2.97502 11.8799 3.42786 10.7206 4.17091 9.9883C4.91536 9.25463 6.02674 8.87499 7.49995 8.87499C8.97317 8.87499 10.0846 9.25463 10.8291 9.98831C11.5721 10.7206 12.025 11.8799 12.025 13.5999C12.025 13.8623 12.2376 14.0749 12.5 14.0749C12.7623 14.075 12.975 13.8623 12.975 13.6C12.975 11.72 12.4778 10.2794 11.4959 9.31166C10.7244 8.55135 9.70025 8.12903 8.50625 7.98352C10.0187 7.5474 11.125 6.15289 11.125 4.5C11.125 2.49797 9.50203 0.875 7.5 0.875ZM4.825 4.5C4.825 3.02264 6.02264 1.825 7.5 1.825C8.97736 1.825 10.175 3.02264 10.175 4.5C10.175 5.97736 8.97736 7.175 7.5 7.175C6.02264 7.175 4.825 5.97736 4.825 4.5Z"})})}),(0,l.jsxs)("section",{className:"block border-l border-gray-300 m-3",children:[(0,l.jsxs)("div",{className:"pl-3",children:[(0,l.jsx)("h3",{className:"text-gray-600 text-lg font-bold",children:a}),(0,l.jsx)("h3",{className:"text-gray-600 font-semibold text-sm",children:t})]}),(0,l.jsx)("div",{className:"flex gap-3 pt-2 pl-3 text-gray-600",children:s})]})]})};var w=a(4400);let C=()=>{let{adminEmployee:e}=(0,r.n)(),[t,a]=(0,h.useState)([]),[s,n]=(0,h.useState)({limit:0,current:0,totalPage:0});return(0,h.useEffect)(()=>{e&&(a(e.data),n({limit:e.limit,current:e.page,totalPage:e.totalPage}))},[e]),(0,l.jsxs)("div",{className:"w-full h-full col-span-7 grid grid-cols-5 gap-2 p-1 rounded-md",children:[t.slice(0,s.limit*s.current).map(e=>{var t;return(0,l.jsx)(b,{name:"".concat(e.first_name," ").concat(e.last_name),email:e.email,role:(null==(t=e.role[0])?void 0:t.role)||""},e.employee_id)}),(0,l.jsxs)("div",{className:"col-span-4 flex justify-start",children:[s.totalPage>1&&s.current<s.totalPage&&(0,l.jsx)(y,{handle:()=>{if(s.current<s.totalPage){let e=t.length,l=async()=>{let e=await (0,i.gf)(),l=e&&await (0,w.JP)(e,s.current+1,s.limit);l&&200===l.status&&(a([...t,...l.data.data]),n({...s,current:s.current+1}))};e<s.limit*s.current+1?l():n({...s,current:s.current+1})}},content:"Load More"}),s.totalPage>1&&s.current===s.totalPage&&(0,l.jsx)(y,{handle:()=>{n({...s,current:1})},content:"Hide"})]})]})};var _=a(5261),k=a(9434);let T=h.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("div",{className:"relative w-full overflow-auto",children:(0,l.jsx)("table",{ref:t,className:(0,k.cn)("w-full caption-bottom text-sm",a),...s})})});T.displayName="Table";let P=h.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("thead",{ref:t,className:(0,k.cn)("[&_tr]:border-b",a),...s})});P.displayName="TableHeader";let S=h.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("tbody",{ref:t,className:(0,k.cn)("[&_tr:last-child]:border-0",a),...s})});S.displayName="TableBody",h.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("tfoot",{ref:t,className:(0,k.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...s})}).displayName="TableFooter";let L=h.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("tr",{ref:t,className:(0,k.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s})});L.displayName="TableRow";let E=h.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("th",{ref:t,className:(0,k.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...s})});E.displayName="TableHead";let A=h.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("td",{ref:t,className:(0,k.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...s})});A.displayName="TableCell",h.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("caption",{ref:t,className:(0,k.cn)("mt-4 text-sm text-muted-foreground",a),...s})}).displayName="TableCaption";var O=a(3645),R=a(4020),z=a(5695);let I=()=>{let{project:e,employeeProject:t}=(0,_.I)(),{employee:a}=(0,r.n)(),{isAdmin:s,isManager:n}=(0,h.use)(g.B),[c,i]=(0,h.useState)([]),[o,d]=(0,h.useState)({list:[],current:1}),p=(0,z.useRouter)();return(0,h.useEffect)(()=>{a&&(s?e&&i(e.data):t&&i(t.data),s?e&&d({list:[...Array(e.total)].map((e,t)=>t+1),current:1}):t&&d({list:[...Array(t.total)].map((e,t)=>t+1),current:1}))},[a,e,t]),(0,l.jsx)("div",{className:"w-full h-full col-span-5 bg-zinc-900 text-white p-1 rounded-md",children:(0,l.jsxs)(T,{children:[(0,l.jsx)(P,{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)(E,{children:"Name"}),(0,l.jsx)(E,{children:"Description"}),(0,l.jsx)(E,{children:"Start Date"}),(0,l.jsx)(E,{children:"End Date"}),(0,l.jsx)(E,{className:"text-center",children:"Action"})]})}),(0,l.jsx)(S,{children:c.map(e=>(0,l.jsxs)(L,{children:[(0,l.jsx)(A,{children:e.project_name}),(0,l.jsx)(A,{children:e.description}),(0,l.jsx)(A,{children:e.start_date.split("T")[0].split("-").reverse().join("/")}),(0,l.jsx)(A,{children:e.end_date.split("T")[0].split("-").reverse().join("/")}),(0,l.jsxs)(A,{className:"flex justify-around",children:[(s||n)&&(0,l.jsx)(O.A,{onClick:()=>{localStorage.setItem("projectId",e.project_id),p.push("/project")},className:"cursor-pointer"}),s&&(0,l.jsx)(R.A,{className:"cursor-pointer"})]})]},e.project_id))})]})})};var B=a(5048),F=a(5503),V=a(9409),M=a(5731);let Z=["name","description","deadline"],q=["total","spent","category"],D=e=>{var t;let{closeDialog:a}=e,{register:s,handleSubmit:p}=(0,o.mN)(),[m,u]=(0,h.useState)(null),[x,j]=(0,h.useState)(null),[f,g]=(0,h.useState)(null),[y,v]=(0,h.useState)(null),[b,C]=(0,h.useState)(null),[_,k]=(0,h.useState)(null),{team:T}=(0,r.n)();(0,h.useEffect)(()=>{(async()=>{if(m){let e=await (0,F.fE)(m);if(!Object.keys(e[0]).every(e=>Z.includes(e)))return d.oR.error("Key of excel does not match");g(e.map(e=>({task_name:e.name,description:e.description,due_date:e.deadline,assigned_to:""})))}if(x){let e=await (0,F.fE)(x);if(!Object.keys(e[0]).every(e=>q.includes(e)))return d.oR.error("Key of excel does not match");v(e.map(e=>({total:e.total,spent:e.spent,category:e.category})))}})()},[m,x]),(0,h.useEffect)(()=>{_&&(async()=>{if((b?b.filter(e=>e.team_id===_).length:0).length>0)return;let e=await (0,i.gf)(),t=e&&await (0,w.xn)(e,_);200!==t.status&&d.oR.error("Get team member error");let a={id:_,data:t.data.map(e=>({...e,isChecked:!1}))};b&&C([...b,a]),b||C([a])})()},[_]);let P=(e,t,a)=>{b&&C(b.map(s=>({...s,data:s.id===e?s.data.map(e=>e.employee_id===t?{...e,isChecked:!a}:e):s.data})))},S=async e=>{if(!f)return d.oR.error("Task is required");if(f.filter(e=>""===e.assigned_to).length>0)return d.oR.error("Assigned Task");if(!b)return d.oR.error("Member is required");let t=b.flatMap(e=>e.data.filter(e=>e.isChecked)),s={project:{project_name:e.name,description:e.description,start_date:e.start_date,end_date:e.end_date,status:"planning"},task:f.map(e=>({task_name:e.task_name,description:e.description,due_date:e.due_date.split(" ")[0],assigned_to:e.assigned_to,status:"not_started"})),assignment:t.map(e=>({employee_id:e.employee_id,role_in_project:e.role})),budget:y},l=await (0,i.gf)();if(201!==(l&&await (0,N.Pz)(l,s)).status)return d.oR.error("Create project error");a()},L=(e,t)=>{f&&g(f.map((a,s)=>({...a,assigned_to:e===s?t:a.assigned_to})))},E=(e,t,a)=>{y&&v(y.map((s,l)=>({...s,[t]:e===l?a:s[t]})))};return(0,l.jsxs)(c.EO,{children:[(0,l.jsx)(c.r7,{className:"text-3xl",children:"New Project"}),(0,l.jsxs)("div",{className:"w-[95vw] h-[80vh] grid grid-cols-10 gap-x-4",children:[(0,l.jsxs)("div",{className:"formProject col-span-3 w-full grid grid-cols-3 content-start gap-2",children:[(0,l.jsx)(n.p,{...s("description",{required:!0}),placeholder:"Description",className:"col-span-2 text-white"}),(0,l.jsx)(n.p,{...s("name",{required:!0}),placeholder:"Project Name",className:"text-white"}),(0,l.jsx)("input",{...s("start_date",{required:!0}),className:"bg-zinc-800 text-gray-200 border-0 rounded-md p-2",type:"date"}),(0,l.jsx)("input",{...s("end_date",{required:!0}),className:"bg-zinc-800 text-gray-200 border-0 rounded-md p-2",type:"date"}),(0,l.jsx)("div",{className:"employee w-full",children:(0,l.jsxs)(V.l6,{onValueChange:e=>k(e),value:_||"",children:[(0,l.jsx)(V.bq,{className:"bg-zinc-700 border-none text-white",children:(0,l.jsx)(V.yv,{placeholder:"Select team"})}),(0,l.jsx)(V.gC,{className:"bg-zinc-700 border-none text-white",children:T&&T.map(e=>(0,l.jsx)(V.eb,{value:e.team_id,children:e.team_name},e.team_id))})]})}),_&&(0,l.jsxs)("div",{className:"col-span-3 grid grid-cols-3 gap-2",children:[(0,l.jsx)("h3",{className:"col-span-3 text-xl font-bold",children:"Add employee into project"}),b&&(null==(t=b.filter(e=>e.id===_)[0])?void 0:t.data.map(e=>(0,l.jsx)(M.A,{click:()=>P(_,e.employee_id,e.isChecked),name:"".concat(e.first_name," ").concat(e.last_name),role:e.role,isChecked:e.isChecked},e.employee_id)))]}),b&&(0,l.jsxs)("div",{className:"col-span-3 grid grid-cols-3 gap-x-2 gap-y-6",children:[(0,l.jsx)("h3",{className:"col-span-3 text-xl font-bold",children:"Employee in project"}),b.flatMap(e=>e.data).filter(e=>e.isChecked).map(e=>(0,l.jsx)(M.A,{name:"".concat(e.first_name," ").concat(e.last_name),role:e.role,isChecked:!0},e.employee_id))]})]}),(0,l.jsxs)("div",{className:"budget col-span-3 flex flex-col",children:[(0,l.jsx)("h3",{className:"text-xl font-bold",children:"Budget"}),!x&&(0,l.jsx)("div",{className:"my-2",children:(0,l.jsx)(B.A,{setFile:j})}),(0,l.jsxs)("div",{className:"w-full flex flex-col",children:[(0,l.jsxs)("div",{className:"w-full h-8 grid grid-cols-4",children:[(0,l.jsx)("div",{children:"Total"}),(0,l.jsx)("div",{children:"Amount"}),(0,l.jsx)("div",{className:"col-span-2",children:"Category"})]}),(0,l.jsx)("div",{className:"w-full overflow-y-auto grid grid-cols-4 gap-2 p-2",children:y&&y.map((e,t)=>(0,l.jsxs)("div",{className:"col-span-4 grid grid-cols-4 gap-2",children:[(0,l.jsx)(n.p,{onChange:e=>E(t,"total",e.target.value),type:"number",defaultValue:e.total,className:"text-white"}),(0,l.jsx)(n.p,{onChange:e=>E(t,"spent",e.target.value),type:"number",defaultValue:e.spent,className:"text-white"}),(0,l.jsx)(n.p,{onChange:e=>E(t,"category",e.target.value),type:"text",defaultValue:e.category,className:"col-span-2 text-white"})]},t))})]})]}),(0,l.jsxs)("div",{className:"task col-span-4 w-full grid grid-cols-5 content-start gap-2",children:[(0,l.jsx)("h3",{className:"col-span-5 text-xl font-bold",children:"Task"}),(0,l.jsx)("div",{className:"col-span-5",children:!f&&(0,l.jsx)(B.A,{setFile:u})}),(0,l.jsxs)("div",{className:"col-span-5 flex flex-col gap-y-4",children:[(0,l.jsxs)("div",{className:"w-full grid grid-cols-5 gap-x-1 gap-y-4",children:[(0,l.jsx)("span",{children:"Task name"}),(0,l.jsx)("span",{className:"col-span-2",children:"Description"}),(0,l.jsx)("span",{children:"Deadline"}),(0,l.jsx)("span",{children:"Assigned to"})]}),(0,l.jsx)("div",{className:"w-full h-[90%] overflow-y-scroll grid grid-cols-5 gap-x-1 gap-y-4",children:f&&f.map((e,t)=>(0,l.jsxs)("div",{className:"col-span-5 grid grid-cols-5 gap-1",children:[(0,l.jsx)(n.p,{...s("task.".concat(t,".task_name"),{required:!0}),defaultValue:e.task_name,placeholder:"Task name",className:"col-span-1"}),(0,l.jsx)(n.p,{...s("task.".concat(t,".description"),{required:!0}),defaultValue:e.description,placeholder:"Description",className:"col-span-2"}),(0,l.jsx)(n.p,{...s("task.".concat(t,".deadline"),{required:!0}),defaultValue:e.due_date,placeholder:"Deadline",className:""}),(0,l.jsx)("div",{className:"employee w-full",children:(0,l.jsxs)(V.l6,{onValueChange:e=>L(t,e),children:[(0,l.jsx)(V.bq,{className:"bg-zinc-700 border-none",children:(0,l.jsx)(V.yv,{placeholder:"Select employee"})}),(0,l.jsx)(V.gC,{className:"bg-zinc-700 border-none",children:b&&b.flatMap(e=>e.data).filter(e=>e.isChecked).map(e=>(0,l.jsx)(V.eb,{value:e.employee_id,children:"".concat(e.first_name," ").concat(e.last_name)},e.employee_id))})]})})]},t))})]})]})]}),(0,l.jsxs)(c.ck,{children:[(0,l.jsx)(c.Rx,{onClick:p(S),className:"bg-blue-500 text-white cursor-pointer",children:"Save"}),(0,l.jsx)(c.Zr,{onClick:()=>{u(null),j(null),g(null),v(null),k(null),C(null),a()},className:"bg-red-500 text-white cursor-pointer border-none",children:"Cancel"})]})]})},J=["firstName","lastName","email","username","password"],H=e=>{let{closeDialog:t}=e,[a,s]=(0,h.useState)(null),[o,m]=(0,h.useState)([]),{adminEmployee:u,team:x,setAdminEmployee:j}=(0,r.n)();(0,h.useEffect)(()=>{(async()=>{if(a){let e=await (0,F.fE)(a);if(!Object.keys(e[0]).every(e=>J.includes(e)))return d.oR.error("Key of excel does not match");m(e.map(e=>({...e,role:"3",team_id:1,position:""})))}})()},[a]);let f=(e,t,a)=>{m(o.map(s=>s.email===e?{...s,[t]:a}:s))},g=async()=>{if(!o)return;if(0!==o.filter(e=>""===e.position).length)return d.oR.error("Position is required");let e=o.map(e=>({auth:{username:e.username,password:e.password},employee:{first_name:e.firstName,last_name:e.lastName,email:e.email},role:{role_id:Number(e.role)},team:{team_id:Number(e.team_id),role:e.position}})),a=await (0,i.gf)(),s=a&&await (0,p.Hh)(a,e);if(201!==s.status)return d.oR.error("Create Employee Failed");u&&j({total:u.total+s.data.length,limit:u.limit,page:u.page,totalPage:u.totalPage,data:[...s.data,...u.data]}),d.oR.success("Create Employee Success"),t()};return(0,l.jsxs)(c.EO,{className:"min-w-[90%]",children:[(0,l.jsx)(c.r7,{children:"Add New Employee"}),(0,l.jsxs)("div",{className:"flex flex-col justify-start",children:[(0,l.jsx)("div",{className:"w-[200px]",children:(0,l.jsx)(B.A,{setFile:s})}),(0,l.jsxs)("div",{className:"w-auto h-auto grid grid-cols-1 gap-2 my-8",children:[(0,l.jsxs)("div",{className:"w-full h-auto grid grid-cols-12",children:[(0,l.jsx)("span",{children:"First Name"}),(0,l.jsx)("span",{children:"Last Name"}),(0,l.jsx)("span",{className:"col-span-2",children:"Email"}),(0,l.jsx)("span",{className:"col-span-2",children:"Username"}),(0,l.jsx)("span",{children:"Password"}),(0,l.jsx)("span",{children:"Role"}),(0,l.jsx)("span",{className:"col-span-2",children:"Team Role"}),(0,l.jsx)("span",{className:"col-span-2",children:"Position"})]}),(0,l.jsx)("div",{className:"w-full h-[500px] grid grid-cols-1 gap-2 content-start overflow-y-auto p-1",children:o&&o.map(e=>(0,l.jsxs)("div",{className:"w-full h-auto grid grid-cols-12 gap-x-2",children:[(0,l.jsx)("div",{className:"truncate flex items-center",children:e.firstName}),(0,l.jsx)("div",{className:"truncate flex items-center",children:e.lastName}),(0,l.jsx)("div",{className:"truncate col-span-2 flex items-center",children:(0,l.jsx)("span",{className:"truncate",children:e.email})}),(0,l.jsx)("div",{className:"truncate col-span-2 flex items-center",children:(0,l.jsx)("span",{className:"truncate",children:e.username})}),(0,l.jsx)("div",{className:"truncate flex items-center",children:e.password}),(0,l.jsxs)(V.l6,{onValueChange:t=>f(e.email,"role",t),value:e.role,children:[(0,l.jsx)(V.bq,{className:"w-[100px] bg-zinc-700 border-none",children:(0,l.jsx)(V.yv,{placeholder:"Select"})}),(0,l.jsxs)(V.gC,{className:"w-[100px] bg-zinc-700 border-none",children:[(0,l.jsx)(V.eb,{value:"2",children:"Manager"}),(0,l.jsx)(V.eb,{value:"3",children:"Member"})]})]}),(0,l.jsx)("div",{className:"col-span-2",children:(0,l.jsxs)(V.l6,{onValueChange:t=>f(e.email,"team_id",t),value:String(e.team_id),children:[(0,l.jsx)(V.bq,{className:"bg-zinc-700 border-none",children:(0,l.jsx)(V.yv,{placeholder:"Select team"})}),(0,l.jsx)(V.gC,{className:"bg-zinc-700 border-none",children:x&&x.map(e=>(0,l.jsx)(V.eb,{value:String(e.team_id),children:e.team_name},e.team_id))})]})}),(0,l.jsx)("div",{className:"col-span-2",children:(0,l.jsx)(n.p,{type:"text",onChange:t=>f(e.email,"position",t.target.value),className:"bg-zinc-700 border-none"})})]},e.email))})]})]}),(0,l.jsxs)(c.ck,{children:[(0,l.jsx)(c.Rx,{onClick:e=>{e.preventDefault(),g()},className:"bg-blue-500 text-white cursor-pointer",children:"Save"}),(0,l.jsx)(c.Zr,{className:"bg-red-500 text-white cursor-pointer border-none",children:"Cancel"})]})]})};var G=a(4395),K=a(7580),U=a(6131);let Q=e=>{let{title:t,value:a,Icon:s,bgIcon:r,color:n}=e;return(0,l.jsxs)("div",{className:"statisItem grid grid-cols-4 gap-x-2 h-[100px] shadow-md bg-[#000] border border-zinc-700 rounded-md px-8",children:[(0,l.jsxs)("div",{className:"statisContent col-span-3 h-full flex flex-col justify-center items-start",children:[(0,l.jsx)("p",{className:"text-md font-semibold text-zinc-400",children:t}),(0,l.jsx)("p",{className:"text-4xl font-semibold text-white",children:a})]}),(0,l.jsx)("div",{className:"statisIcon h-full flex justify-center items-center",children:(0,l.jsx)("div",{className:"iconItem w-4/5 h-2/4 flex justify-center items-center rounded-md ".concat(r.toString()),children:(0,l.jsx)(s,{className:"w-8 h-8 ".concat(n)})})})]})},$=()=>{let{project:e}=(0,_.I)(),{adminEmployee:t,team:a}=(0,r.n)(),{task:s}=(0,j.O)();return(0,l.jsxs)("div",{className:"w-full h-auto grid grid-cols-4 gap-x-4 mb-4 px-2",children:[e&&(0,l.jsx)(Q,{title:"Project",value:e.total,Icon:G.A,bgIcon:"bg-[#a5f3fc]",color:"text-[#1d4ed8]"}),t&&(0,l.jsx)(Q,{title:"Employee",value:t.total,Icon:K.A,bgIcon:"bg-[#86efac]",color:"text-[#15803d]"}),a&&(0,l.jsx)(Q,{title:"Team",value:a.length,Icon:K.A,bgIcon:"bg-[#86efac]",color:"text-[#15803d]"}),s&&(0,l.jsx)(Q,{title:"Task",value:s.total.toString(),Icon:U.A,bgIcon:"bg-[#fed7aa]",color:"text-[#c2410c]"})]})},Y=["team_name","description"],W=e=>{let{closeDialog:t}=e,{team:a,setTeam:s}=(0,r.n)(),[n,o]=(0,h.useState)(null),[p,m]=(0,h.useState)([]);(0,h.useEffect)(()=>{(async()=>{if(n){let e=await (0,F.fE)(n);if(!Object.keys(e[0]).every(e=>Y.includes(e)))return d.oR.error("Key of excel does not match");m(e.map(e=>({team_name:e.name,description:e.description})))}})()},[n]);let u=async()=>{if(!p)return d.oR.error("Data is required");let e=p.map(e=>({team_name:e.team_name,description:e.description})),l=await (0,i.gf)(),r=l&&await (0,w.jZ)(l,e);if(!r)return d.oR.error("Create team error");s([...a,...r.data]),t()};return(0,l.jsxs)(c.EO,{children:[(0,l.jsx)(c.r7,{children:"Team"}),(0,l.jsxs)("div",{className:"w-[50vw]",children:[!n&&(0,l.jsx)(B.A,{setFile:o}),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsxs)("div",{className:"tbHead w-full grid grid-cols-3",children:[(0,l.jsx)("div",{className:"col-span-1",children:"Team Name"}),(0,l.jsx)("div",{className:"col-span-2",children:"Description"})]}),p&&p.map(e=>(0,l.jsxs)("div",{className:"tbBody w-full grid grid-cols-3",children:[(0,l.jsx)("div",{className:"col-span-1",children:e.team_name}),(0,l.jsx)("div",{className:"col-span-2",children:e.description})]}))]})]}),(0,l.jsxs)(c.ck,{children:[(0,l.jsx)(c.Rx,{onClick:u,className:"bg-blue-600 text-white cursor-pointer border-none",children:"Save"}),(0,l.jsx)(c.Zr,{onClick:t,className:"bg-red-600 text-white cursor-pointer border-none",children:"Cancel"})]})]})},X=()=>{let{team:e}=(0,r.n)(),[t,a]=(0,h.useState)([]),{isAdmin:s}=(0,h.use)(g.B);return(0,h.useEffect)(()=>{e&&a(e)},[e]),s&&t&&(0,l.jsxs)("div",{className:"w-full col-span-7",children:[(0,l.jsx)("p",{className:"text-2xl font-semibold text-zinc-100 my-4",children:"Team"}),(0,l.jsx)("div",{className:"w-full h-auto grid grid-cols-4 gap-6 mb-4 px-2",children:t.map(e=>(0,l.jsx)("div",{className:"w-full h-10 bg-[#000] text-white hover:scale-105 border border-zinc-700 rounded-md flex flex-col items-center cursor-pointer transition-all",children:(0,l.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:e.team_name})},e.team_id))})]})};var ee=a(1083),et=a(3915),ea=a(6864);let es=(0,et.Dk)().length?(0,et.Sx)():(0,et.Wp)({apiKey:"AIzaSyAm2lUj13YtHK82ZrJgnLgw4tIZKbCg6Hw",authDomain:"pmanager-9c26b.firebaseapp.com",projectId:"pmanager-9c26b",storageBucket:"pmanager-9c26b.firebasestorage.app",messagingSenderId:"80781043665",appId:"1:80781043665:web:c4e4759d0ffdd84a7522f0",measurementId:"G-5F088MXGTT"});(0,ea.TT)().then(e=>{e&&(s=(0,ea.P5)(es))});var el=a(6272);function er(){let{isAdmin:e,isLog:t}=(0,h.use)(g.B),{isPending:a}=(0,h.use)(el._),[r,n]=(0,h.useState)({project:!1,employee:!1,budget:!1,team:!1});return(0,h.useEffect)(()=>{s&&console.log("Firebase Analytics ready")},[]),t&&!a&&(0,l.jsxs)("div",{className:"container mx-auto p-8 pt-24",children:[(0,l.jsx)("div",{className:"mb-10 flex flex-wrap justify-start",children:e&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)($,{}),(0,l.jsx)(ee.A,{title:"+ Create Project",isOpen:r.project,openChange:e=>n({...r,project:e}),btnClass:"btn_create text-white cursor-pointer",Component:D}),(0,l.jsx)(ee.A,{title:"+ Create Employee",isOpen:r.employee,openChange:e=>n({...r,employee:e}),btnClass:"btn_create text-white cursor-pointer",Component:H}),(0,l.jsx)(ee.A,{title:"+ Create Team",isOpen:r.team,openChange:e=>n({...r,team:e}),btnClass:"btn_create text-white cursor-pointer",Component:W})]})}),(0,l.jsxs)("div",{className:"w-full grid gap-x-10 gap-y-5 grid-cols-7",children:[(0,l.jsx)(u,{}),(0,l.jsx)(I,{}),(0,l.jsx)(X,{}),e&&(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"Task"}),(0,l.jsx)(v,{}),e&&(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"Employee"}),(0,l.jsx)(C,{})]})]})}},6821:(e,t,a)=>{"use strict";a.d(t,{O:()=>s});let s=(0,a(5453).v)(e=>({task:null,setTask:t=>e({task:t}),statusTask:null,setStatusTask:t=>e({statusTask:t})}))},9958:(e,t,a)=>{"use strict";a.d(t,{Hh:()=>l,Jv:()=>s,KZ:()=>r});let s=async(e,t)=>(await fetch("".concat("http://localhost:3001/api","/auth/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})})).json(),l=async(e,t)=>(await fetch("".concat("http://localhost:3001/api","/auth/signup"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(t)})).json(),r=async(e,t)=>(await fetch("".concat("http://localhost:3001/api","/auth/update"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(t)})).json()}},e=>{var t=t=>e(e.s=t);e.O(0,[135,30,678,558,623,578,848,441,684,358],()=>t(2033)),_N_E=e.O()}]);