(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{259:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});var s=t(5155);let l=e=>{let{title:a,description:t,tag:l}=e;return(0,s.jsxs)("div",{className:"card",children:[(0,s.jsxs)("div",{className:"mac-header",children:[(0,s.jsx)("span",{className:"red"}),(0,s.jsx)("span",{className:"yellow"}),(0,s.jsx)("span",{className:"green"})]}),(0,s.jsx)("span",{className:"card-title",children:a}),(0,s.jsx)("div",{className:"tags",children:l.map(e=>(0,s.jsx)("span",{className:"card-tag mr-1",children:e},"tag-".concat(e)))}),(0,s.jsx)("div",{className:"code-editor",children:(0,s.jsx)("pre",{children:(0,s.jsx)("code",{children:t})})})]})}},944:(e,a,t)=>{"use strict";t.r(a),t.d(a,{completed:()=>r,in_progress:()=>l,not_started:()=>s});let s="Not Started",l="In Progress",r="Completed"},2033:(e,a,t)=>{Promise.resolve().then(t.bind(t,6492))},5261:(e,a,t)=>{"use strict";t.d(a,{I:()=>s});let s=(0,t(5453).v)(e=>({project:null,setProject:a=>e({project:a}),employeeProject:null,setEmployeeProject:a=>e({employeeProject:a})}))},6492:(e,a,t)=>{"use strict";let s;t.r(a),t.d(a,{default:()=>el});var l=t(5155),r=t(2144),n=t(2523),i=t(8193),c=t(2923),d=t(2177),o=t(8543),m=t(9958);let p=e=>{let{setIsOpen:a}=e,{register:t,handleSubmit:s}=(0,d.mN)(),r=async e=>{if(e.password!==e.confirm_password)return o.oR.error("Password does not match");let t=await (0,c.gf)();if(t){if(200!==(t&&await (0,m.KZ)(t,{current:e.current,new:e.password})).status)return o.oR.error("Update Password Failed");o.oR.success("Update Password Success"),a(!1)}};return(0,l.jsxs)(i.EO,{children:[(0,l.jsx)(i.r7,{children:"Change Password"}),(0,l.jsxs)("div",{className:"flex flex-col gap-y-2 text-white",children:[(0,l.jsx)(n.p,{type:"password",placeholder:"Current Password",...t("current")}),(0,l.jsx)(n.p,{type:"password",placeholder:"Password",...t("password")}),(0,l.jsx)(n.p,{type:"password",placeholder:"Confirm Password",...t("confirm_password")})]}),(0,l.jsxs)(i.ck,{children:[(0,l.jsx)(i.Rx,{className:"bg-blue-600 text-white",onClick:s(r),children:"Save"}),(0,l.jsx)(i.Zr,{className:"bg-red-600 border-none text-white",onClick:()=>a(!1),children:"Cancel"})]})]})};var x=t(2115);let u=()=>{let{employee:e}=(0,r.n)(),[a,t]=(0,x.useState)(!1);return(0,l.jsx)("div",{className:"account-info w-full h-full col-span-2",children:(0,l.jsxs)("div",{className:"w-full h-full grid grid-cols-2 gap-y-4 gap-x-2 text-white",children:[(0,l.jsx)(n.p,{type:"text",defaultValue:(null==e?void 0:e.first_name)||"",readOnly:!0,placeholder:"First Name"}),(0,l.jsx)(n.p,{type:"text",defaultValue:(null==e?void 0:e.last_name)||"",readOnly:!0,placeholder:"Last Name"}),(0,l.jsx)(n.p,{type:"text",defaultValue:(null==e?void 0:e.email)||"",readOnly:!0,placeholder:"Email",className:"col-span-2"}),(0,l.jsx)(n.p,{type:"text",defaultValue:(null==e?void 0:e.role)||"",readOnly:!0,placeholder:"Role",className:"col-span-1"}),(0,l.jsxs)(i.Lt,{open:a,onOpenChange:()=>t(!a),children:[(0,l.jsx)(i.tv,{className:"btn_create text-white cursor-pointer",children:"Change Password"}),(0,l.jsx)(p,{setIsOpen:t})]})]})})};var h=t(259),j=t(6821),g=t(944),f=t(7005);let N=e=>{let{content:a,handle:t}=e;return(0,l.jsx)("button",{onClick:t,className:"cursor-pointer transition-all bg-blue-500 text-white px-6 py-2 rounded-lg border-blue-600 border-b-[4px] hover:brightness-110 hover:-translate-y-[1px] hover:border-b-[6px] active:border-b-[2px] active:brightness-90 active:translate-y-[2px]",children:a})};var b=t(2173);let v=()=>{let{task:e,statusTask:a}=(0,j.O)(),{employee:t}=(0,r.n)(),[s,n]=(0,x.useState)([]),[i,d]=(0,x.useState)({total:0,limit:0,current:0,totalPage:0}),{isAdmin:o}=(0,x.use)(f.B);return(0,x.useEffect)(()=>{o?(e&&n(e.data),e&&d({total:e.total,limit:e.limit,current:e.page,totalPage:e.totalPage})):(a&&n(a.completed.data.map(e=>({...e,employee:t}))),a&&d({total:a.completed.total,limit:a.completed.limit,current:a.completed.page,totalPage:a.completed.totalPage}))},[e,t,a]),(0,l.jsxs)("div",{className:"h-full col-span-7 grid grid-cols-4 gap-2 p-1 rounded-md",children:[s.slice(0,i.current*i.limit).map(e=>(0,l.jsx)(h.A,{title:e.task_name,description:e.description,tag:["".concat(e.employee.first_name," ").concat(e.employee.last_name),e.due_date.split("T")[0].split("-").reverse().join("/"),g[e.status]]},e.task_id)),(0,l.jsxs)("div",{className:"col-span-4 flex justify-start",children:[i.totalPage>1&&i.current<i.totalPage&&(0,l.jsx)(N,{handle:()=>{if(i.current<i.totalPage){let e=s.length,a=async()=>{let e=await (0,c.gf)(),a=e&&await (o?(0,b.m$)(e,i.current+1,i.limit):(0,b.V_)("employee",e,"completed",i.current+1,i.limit));a&&200===a.status&&(n([...s,...a.data.data]),d({...i,current:i.current+1}))};e<i.limit*i.current?a():d({...i,current:i.current+1})}},content:"Load More"}),i.totalPage>1&&i.current===i.totalPage&&(0,l.jsx)(N,{handle:()=>{d({...i,current:1})},content:"Hide"})]})]})},y=e=>{let{name:a,role:t,email:s}=e;return(0,l.jsxs)("div",{className:"flex items-center p-3 w-72 h-28 bg-white rounded-md shadow-lg",children:[(0,l.jsx)("section",{className:"flex justify-center items-center w-14 h-14 rounded-full shadow-md bg-gradient-to-r from-[#F9C97C] to-[#A2E9C1] hover:from-[#C9A9E9] hover:to-[#7EE7FC] hover:cursor-pointer hover:scale-110 duration-300",children:(0,l.jsx)("svg",{viewBox:"0 0 15 15",className:"w-7 fill-gray-700",children:(0,l.jsx)("path",{d:"M7.5 0.875C5.49797 0.875 3.875 2.49797 3.875 4.5C3.875 6.15288 4.98124 7.54738 6.49373 7.98351C5.2997 8.12901 4.27557 8.55134 3.50407 9.31167C2.52216 10.2794 2.02502 11.72 2.02502 13.5999C2.02502 13.8623 2.23769 14.0749 2.50002 14.0749C2.76236 14.0749 2.97502 13.8623 2.97502 13.5999C2.97502 11.8799 3.42786 10.7206 4.17091 9.9883C4.91536 9.25463 6.02674 8.87499 7.49995 8.87499C8.97317 8.87499 10.0846 9.25463 10.8291 9.98831C11.5721 10.7206 12.025 11.8799 12.025 13.5999C12.025 13.8623 12.2376 14.0749 12.5 14.0749C12.7623 14.075 12.975 13.8623 12.975 13.6C12.975 11.72 12.4778 10.2794 11.4959 9.31166C10.7244 8.55135 9.70025 8.12903 8.50625 7.98352C10.0187 7.5474 11.125 6.15289 11.125 4.5C11.125 2.49797 9.50203 0.875 7.5 0.875ZM4.825 4.5C4.825 3.02264 6.02264 1.825 7.5 1.825C8.97736 1.825 10.175 3.02264 10.175 4.5C10.175 5.97736 8.97736 7.175 7.5 7.175C6.02264 7.175 4.825 5.97736 4.825 4.5Z"})})}),(0,l.jsxs)("section",{className:"block border-l border-gray-300 m-3",children:[(0,l.jsxs)("div",{className:"pl-3",children:[(0,l.jsx)("h3",{className:"text-gray-600 text-lg font-bold",children:t}),(0,l.jsx)("h3",{className:"text-gray-600 font-semibold text-sm",children:a})]}),(0,l.jsx)("div",{className:"flex gap-3 pt-2 pl-3 text-gray-600",children:s})]})]})};var w=t(4400);let _=()=>{let{adminEmployee:e}=(0,r.n)(),[a,t]=(0,x.useState)([]),[s,n]=(0,x.useState)({limit:0,current:0,totalPage:0});return(0,x.useEffect)(()=>{e&&(t(e.data),n({limit:e.limit,current:e.page,totalPage:e.totalPage}))},[e]),(0,l.jsxs)("div",{className:"w-full h-full col-span-7 grid grid-cols-5 gap-2 p-1 rounded-md",children:[a.slice(0,s.limit*s.current).map(e=>{var a;return(0,l.jsx)(y,{name:"".concat(e.first_name," ").concat(e.last_name),email:e.email,role:(null==(a=e.role[0])?void 0:a.role)||""},e.employee_id)}),(0,l.jsxs)("div",{className:"col-span-4 flex justify-start",children:[s.totalPage>1&&s.current<s.totalPage&&(0,l.jsx)(N,{handle:()=>{if(s.current<s.totalPage){let e=a.length,l=async()=>{let e=await (0,c.gf)(),l=e&&await (0,w.JP)(e,s.current+1,s.limit);l&&200===l.status&&(t([...a,...l.data.data]),n({...s,current:s.current+1}))};e<s.limit*s.current+1?l():n({...s,current:s.current+1})}},content:"Load More"}),s.totalPage>1&&s.current===s.totalPage&&(0,l.jsx)(N,{handle:()=>{n({...s,current:1})},content:"Hide"})]})]})};var C=t(5261),k=t(9434);let P=x.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,l.jsx)("div",{className:"relative w-full overflow-auto",children:(0,l.jsx)("table",{ref:a,className:(0,k.cn)("w-full caption-bottom text-sm",t),...s})})});P.displayName="Table";let S=x.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,l.jsx)("thead",{ref:a,className:(0,k.cn)("[&_tr]:border-b",t),...s})});S.displayName="TableHeader";let T=x.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,l.jsx)("tbody",{ref:a,className:(0,k.cn)("[&_tr:last-child]:border-0",t),...s})});T.displayName="TableBody",x.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,l.jsx)("tfoot",{ref:a,className:(0,k.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s})}).displayName="TableFooter";let R=x.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,l.jsx)("tr",{ref:a,className:(0,k.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s})});R.displayName="TableRow";let A=x.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,l.jsx)("th",{ref:a,className:(0,k.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...s})});A.displayName="TableHead";let E=x.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,l.jsx)("td",{ref:a,className:(0,k.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...s})});E.displayName="TableCell",x.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,l.jsx)("caption",{ref:a,className:(0,k.cn)("mt-4 text-sm text-muted-foreground",t),...s})}).displayName="TableCaption";var O=t(3645),I=t(4020),z=t(5695);let q=()=>{let{project:e,employeeProject:a}=(0,C.I)(),{employee:t}=(0,r.n)(),{isAdmin:s,isManager:n,setProjectId:i}=(0,x.use)(f.B),[c,d]=(0,x.useState)([]),[o,m]=(0,x.useState)({list:[],current:1}),p=(0,z.useRouter)();return(0,x.useEffect)(()=>{t&&(s?e&&d(e.data):a&&d(a.data),s?e&&m({list:[...Array(e.total)].map((e,a)=>a+1),current:1}):a&&m({list:[...Array(a.total)].map((e,a)=>a+1),current:1}))},[t,e,a]),(0,l.jsx)("div",{className:"w-full h-full col-span-5 bg-zinc-900 text-white p-1 rounded-md",children:(0,l.jsxs)(P,{children:[(0,l.jsx)(S,{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)(A,{children:"Name"}),(0,l.jsx)(A,{children:"Description"}),(0,l.jsx)(A,{children:"Start Date"}),(0,l.jsx)(A,{children:"End Date"}),(0,l.jsx)(A,{className:"text-center",children:"Action"})]})}),(0,l.jsx)(T,{children:c.map(e=>(0,l.jsxs)(R,{children:[(0,l.jsx)(E,{children:e.project_name}),(0,l.jsx)(E,{children:e.description}),(0,l.jsx)(E,{children:e.start_date.split("T")[0].split("-").reverse().join("/")}),(0,l.jsx)(E,{children:e.end_date.split("T")[0].split("-").reverse().join("/")}),(0,l.jsxs)(E,{className:"flex justify-around",children:[(s||n)&&(0,l.jsx)(O.A,{onClick:()=>{i(e.project_id),p.push("/project")},className:"cursor-pointer"}),s&&(0,l.jsx)(I.A,{className:"cursor-pointer"})]})]},e.project_id))})]})})};var V=t(5048),F=t(5503),D=t(9409),B=t(5731);let M=["name","description","deadline"],Z=["total","spent","category"],H=e=>{var a;let{closeDialog:t}=e,{register:s,handleSubmit:m}=(0,d.mN)(),[p,u]=(0,x.useState)(null),[h,j]=(0,x.useState)(null),[g,f]=(0,x.useState)(null),[N,v]=(0,x.useState)(null),[y,_]=(0,x.useState)(null),[C,k]=(0,x.useState)(null),{team:P}=(0,r.n)();(0,x.useEffect)(()=>{(async()=>{if(p){let e=await (0,F.f)(p);if(!Object.keys(e[0]).every(e=>M.includes(e)))return o.oR.error("Key of excel does not match");f(e.map(e=>({task_name:e.name,description:e.description,due_date:e.deadline,assigned_to:""})))}if(h){let e=await (0,F.f)(h);if(!Object.keys(e[0]).every(e=>Z.includes(e)))return o.oR.error("Key of excel does not match");v(e.map(e=>({total:e.total,spent:e.spent,category:e.category})))}})()},[p,h]),(0,x.useEffect)(()=>{C&&(async()=>{if((y?y.filter(e=>e.team_id===C).length:0).length>0)return;let e=await (0,c.gf)(),a=e&&await (0,w.xn)(e,C);200!==a.status&&o.oR.error("Get team member error");let t={id:C,data:a.data.map(e=>({...e,isChecked:!1}))};y&&_([...y,t]),y||_([t])})()},[C]);let S=(e,a,t)=>{y&&_(y.map(s=>({...s,data:s.id===e?s.data.map(e=>e.employee_id===a?{...e,isChecked:!t}:e):s.data})))},T=async e=>{if(!g)return o.oR.error("Task is required");if(g.filter(e=>""===e.assigned_to).length>0)return o.oR.error("Assigned Task");if(!y)return o.oR.error("Member is required");let a=y.flatMap(e=>e.data.filter(e=>e.isChecked)),s={project:{project_name:e.name,description:e.description,start_date:e.start_date,end_date:e.end_date,status:"planning"},task:g.map(e=>({task_name:e.task_name,description:e.description,due_date:e.due_date.split(" ")[0],assigned_to:e.assigned_to,status:"not_started"})),assignment:a.map(e=>({employee_id:e.employee_id,role_in_project:e.role})),budget:N},l=await (0,c.gf)();if(201!==(l&&await (0,b.Pz)(l,s)).status)return o.oR.error("Create project error");t()},R=(e,a)=>{g&&f(g.map((t,s)=>({...t,assigned_to:e===s?a:t.assigned_to})))},A=(e,a,t)=>{N&&v(N.map((s,l)=>({...s,[a]:e===l?t:s[a]})))};return(0,l.jsxs)(i.EO,{children:[(0,l.jsx)(i.r7,{className:"text-3xl",children:"New Project"}),(0,l.jsxs)("div",{className:"w-[95vw] h-[80vh] grid grid-cols-10 gap-x-4",children:[(0,l.jsxs)("div",{className:"formProject col-span-3 w-full grid grid-cols-3 content-start gap-2",children:[(0,l.jsx)(n.p,{...s("description",{required:!0}),placeholder:"Description",className:"col-span-2 text-white"}),(0,l.jsx)(n.p,{...s("name",{required:!0}),placeholder:"Project Name",className:"text-white"}),(0,l.jsx)("input",{...s("start_date",{required:!0}),className:"bg-zinc-800 text-gray-200 border-0 rounded-md p-2",type:"date"}),(0,l.jsx)("input",{...s("end_date",{required:!0}),className:"bg-zinc-800 text-gray-200 border-0 rounded-md p-2",type:"date"}),(0,l.jsx)("div",{className:"employee w-full",children:(0,l.jsxs)(D.l6,{onValueChange:e=>k(e),value:C||"",children:[(0,l.jsx)(D.bq,{className:"bg-zinc-700 border-none text-white",children:(0,l.jsx)(D.yv,{placeholder:"Select team"})}),(0,l.jsx)(D.gC,{className:"bg-zinc-700 border-none text-white",children:P&&P.map(e=>(0,l.jsx)(D.eb,{value:e.team_id,children:e.team_name},e.team_id))})]})}),C&&(0,l.jsxs)("div",{className:"col-span-3 grid grid-cols-3 gap-2",children:[(0,l.jsx)("h3",{className:"col-span-3 text-xl font-bold",children:"Add employee into project"}),y&&(null==(a=y.filter(e=>e.id===C)[0])?void 0:a.data.map(e=>(0,l.jsx)(B.A,{click:()=>S(C,e.employee_id,e.isChecked),name:"".concat(e.first_name," ").concat(e.last_name),role:e.role,isChecked:e.isChecked},e.employee_id)))]}),y&&(0,l.jsxs)("div",{className:"col-span-3 grid grid-cols-3 gap-x-2 gap-y-6",children:[(0,l.jsx)("h3",{className:"col-span-3 text-xl font-bold",children:"Employee in project"}),y.flatMap(e=>e.data).filter(e=>e.isChecked).map(e=>(0,l.jsx)(B.A,{name:"".concat(e.first_name," ").concat(e.last_name),role:e.role,isChecked:!0},e.employee_id))]})]}),(0,l.jsxs)("div",{className:"budget col-span-3 flex flex-col",children:[(0,l.jsx)("h3",{className:"text-xl font-bold",children:"Budget"}),!h&&(0,l.jsx)("div",{className:"my-2",children:(0,l.jsx)(V.A,{setFile:j})}),(0,l.jsxs)("div",{className:"w-full flex flex-col",children:[(0,l.jsxs)("div",{className:"w-full h-8 grid grid-cols-4",children:[(0,l.jsx)("div",{children:"Total"}),(0,l.jsx)("div",{children:"Amount"}),(0,l.jsx)("div",{className:"col-span-2",children:"Category"})]}),(0,l.jsx)("div",{className:"w-full overflow-y-auto grid grid-cols-4 gap-2 p-2",children:N&&N.map((e,a)=>(0,l.jsxs)("div",{className:"col-span-4 grid grid-cols-4 gap-2",children:[(0,l.jsx)(n.p,{onChange:e=>A(a,"total",e.target.value),type:"number",defaultValue:e.total,className:"text-white"}),(0,l.jsx)(n.p,{onChange:e=>A(a,"spent",e.target.value),type:"number",defaultValue:e.spent,className:"text-white"}),(0,l.jsx)(n.p,{onChange:e=>A(a,"category",e.target.value),type:"text",defaultValue:e.category,className:"col-span-2 text-white"})]},a))})]})]}),(0,l.jsxs)("div",{className:"task col-span-4 w-full grid grid-cols-5 content-start gap-2",children:[(0,l.jsx)("h3",{className:"col-span-5 text-xl font-bold",children:"Task"}),(0,l.jsx)("div",{className:"col-span-5",children:!g&&(0,l.jsx)(V.A,{setFile:u})}),(0,l.jsxs)("div",{className:"col-span-5 flex flex-col gap-y-4",children:[(0,l.jsxs)("div",{className:"w-full grid grid-cols-5 gap-x-1 gap-y-4",children:[(0,l.jsx)("span",{children:"Task name"}),(0,l.jsx)("span",{className:"col-span-2",children:"Description"}),(0,l.jsx)("span",{children:"Deadline"}),(0,l.jsx)("span",{children:"Assigned to"})]}),(0,l.jsx)("div",{className:"w-full h-[90%] overflow-y-scroll grid grid-cols-5 gap-x-1 gap-y-4",children:g&&g.map((e,a)=>(0,l.jsxs)("div",{className:"col-span-5 grid grid-cols-5 gap-1",children:[(0,l.jsx)(n.p,{...s("task.".concat(a,".task_name"),{required:!0}),defaultValue:e.task_name,placeholder:"Task name",className:"col-span-1"}),(0,l.jsx)(n.p,{...s("task.".concat(a,".description"),{required:!0}),defaultValue:e.description,placeholder:"Description",className:"col-span-2"}),(0,l.jsx)(n.p,{...s("task.".concat(a,".deadline"),{required:!0}),defaultValue:e.due_date,placeholder:"Deadline",className:""}),(0,l.jsx)("div",{className:"employee w-full",children:(0,l.jsxs)(D.l6,{onValueChange:e=>R(a,e),children:[(0,l.jsx)(D.bq,{className:"bg-zinc-700 border-none",children:(0,l.jsx)(D.yv,{placeholder:"Select employee"})}),(0,l.jsx)(D.gC,{className:"bg-zinc-700 border-none",children:y&&y.flatMap(e=>e.data).filter(e=>e.isChecked).map(e=>(0,l.jsx)(D.eb,{value:e.employee_id,children:"".concat(e.first_name," ").concat(e.last_name)},e.employee_id))})]})})]},a))})]})]})]}),(0,l.jsxs)(i.ck,{children:[(0,l.jsx)(i.Rx,{onClick:m(T),className:"bg-blue-500 text-white cursor-pointer",children:"Save"}),(0,l.jsx)(i.Zr,{onClick:()=>{u(null),j(null),f(null),v(null),k(null),_(null),t()},className:"bg-red-500 text-white cursor-pointer border-none",children:"Cancel"})]})]})},K=["firstName","lastName","email","username","password"],J=e=>{let{closeDialog:a}=e,[t,s]=(0,x.useState)(null),[d,p]=(0,x.useState)([]),{adminEmployee:u,team:h,setAdminEmployee:j}=(0,r.n)();(0,x.useEffect)(()=>{(async()=>{if(t){let e=await (0,F.f)(t);if(!Object.keys(e[0]).every(e=>K.includes(e)))return o.oR.error("Key of excel does not match");p(e.map(e=>({...e,role:"3",team_id:1,position:""})))}})()},[t]);let g=(e,a,t)=>{p(d.map(s=>s.email===e?{...s,[a]:t}:s))},f=async()=>{if(!d)return;if(0!==d.filter(e=>""===e.position).length)return o.oR.error("Position is required");let e=d.map(e=>({auth:{username:e.username,password:e.password},employee:{first_name:e.firstName,last_name:e.lastName,email:e.email},role:{role_id:Number(e.role)},team:{team_id:Number(e.team_id),role:e.position}})),t=await (0,c.gf)(),s=t&&await (0,m.Hh)(t,e);if(201!==s.status)return o.oR.error("Create Employee Failed");u&&j({total:u.total+s.data.length,limit:u.limit,page:u.page,totalPage:u.totalPage,data:[...s.data,...u.data]}),o.oR.success("Create Employee Success"),a()};return(0,l.jsxs)(i.EO,{className:"min-w-[90%]",children:[(0,l.jsx)(i.r7,{children:"Add New Employee"}),(0,l.jsxs)("div",{className:"flex flex-col justify-start",children:[(0,l.jsx)("div",{className:"w-[200px]",children:(0,l.jsx)(V.A,{setFile:s})}),(0,l.jsxs)("div",{className:"w-auto h-auto grid grid-cols-1 gap-2 my-8",children:[(0,l.jsxs)("div",{className:"w-full h-auto grid grid-cols-12",children:[(0,l.jsx)("span",{children:"First Name"}),(0,l.jsx)("span",{children:"Last Name"}),(0,l.jsx)("span",{className:"col-span-2",children:"Email"}),(0,l.jsx)("span",{className:"col-span-2",children:"Username"}),(0,l.jsx)("span",{children:"Password"}),(0,l.jsx)("span",{children:"Role"}),(0,l.jsx)("span",{className:"col-span-2",children:"Team Role"}),(0,l.jsx)("span",{className:"col-span-2",children:"Position"})]}),(0,l.jsx)("div",{className:"w-full h-[500px] grid grid-cols-1 gap-2 content-start overflow-y-auto p-1",children:d&&d.map(e=>(0,l.jsxs)("div",{className:"w-full h-auto grid grid-cols-12 gap-x-2",children:[(0,l.jsx)("div",{className:"truncate flex items-center",children:e.firstName}),(0,l.jsx)("div",{className:"truncate flex items-center",children:e.lastName}),(0,l.jsx)("div",{className:"truncate col-span-2 flex items-center",children:(0,l.jsx)("span",{className:"truncate",children:e.email})}),(0,l.jsx)("div",{className:"truncate col-span-2 flex items-center",children:(0,l.jsx)("span",{className:"truncate",children:e.username})}),(0,l.jsx)("div",{className:"truncate flex items-center",children:e.password}),(0,l.jsxs)(D.l6,{onValueChange:a=>g(e.email,"role",a),value:e.role,children:[(0,l.jsx)(D.bq,{className:"w-[100px] bg-zinc-700 border-none",children:(0,l.jsx)(D.yv,{placeholder:"Select"})}),(0,l.jsxs)(D.gC,{className:"w-[100px] bg-zinc-700 border-none",children:[(0,l.jsx)(D.eb,{value:"2",children:"Manager"}),(0,l.jsx)(D.eb,{value:"3",children:"Member"})]})]}),(0,l.jsx)("div",{className:"col-span-2",children:(0,l.jsxs)(D.l6,{onValueChange:a=>g(e.email,"team_id",a),value:String(e.team_id),children:[(0,l.jsx)(D.bq,{className:"bg-zinc-700 border-none",children:(0,l.jsx)(D.yv,{placeholder:"Select team"})}),(0,l.jsx)(D.gC,{className:"bg-zinc-700 border-none",children:h&&h.map(e=>(0,l.jsx)(D.eb,{value:String(e.team_id),children:e.team_name},e.team_id))})]})}),(0,l.jsx)("div",{className:"col-span-2",children:(0,l.jsx)(n.p,{type:"text",onChange:a=>g(e.email,"position",a.target.value),className:"bg-zinc-700 border-none"})})]},e.email))})]})]}),(0,l.jsxs)(i.ck,{children:[(0,l.jsx)(i.Rx,{onClick:e=>{e.preventDefault(),f()},className:"bg-blue-500 text-white cursor-pointer",children:"Save"}),(0,l.jsx)(i.Zr,{className:"bg-red-500 text-white cursor-pointer border-none",children:"Cancel"})]})]})};var L=t(4395),U=t(7580),G=t(6131);let W=e=>{let{title:a,value:t,Icon:s,bgIcon:r,color:n}=e;return(0,l.jsxs)("div",{className:"statisItem grid grid-cols-4 gap-x-2 h-[100px] shadow-md bg-[#000] border border-zinc-700 rounded-md px-8",children:[(0,l.jsxs)("div",{className:"statisContent col-span-3 h-full flex flex-col justify-center items-start",children:[(0,l.jsx)("p",{className:"text-md font-semibold text-zinc-400",children:a}),(0,l.jsx)("p",{className:"text-4xl font-semibold text-white",children:t})]}),(0,l.jsx)("div",{className:"statisIcon h-full flex justify-center items-center",children:(0,l.jsx)("div",{className:"iconItem w-4/5 h-2/4 flex justify-center items-center rounded-md ".concat(r.toString()),children:(0,l.jsx)(s,{className:"w-8 h-8 ".concat(n)})})})]})},X=()=>{let{project:e}=(0,C.I)(),{adminEmployee:a,team:t}=(0,r.n)(),{task:s}=(0,j.O)();return(0,l.jsxs)("div",{className:"w-full h-auto grid grid-cols-4 gap-x-4 mb-4 px-2",children:[e&&(0,l.jsx)(W,{title:"Project",value:e.total,Icon:L.A,bgIcon:"bg-[#a5f3fc]",color:"text-[#1d4ed8]"}),a&&(0,l.jsx)(W,{title:"Employee",value:a.total,Icon:U.A,bgIcon:"bg-[#86efac]",color:"text-[#15803d]"}),t&&(0,l.jsx)(W,{title:"Team",value:t.length,Icon:U.A,bgIcon:"bg-[#86efac]",color:"text-[#15803d]"}),s&&(0,l.jsx)(W,{title:"Task",value:s.total.toString(),Icon:G.A,bgIcon:"bg-[#fed7aa]",color:"text-[#c2410c]"})]})},Y=["team_name","description"],$=e=>{let{closeDialog:a}=e,{team:t,setTeam:s}=(0,r.n)(),[n,d]=(0,x.useState)(null),[m,p]=(0,x.useState)([]);(0,x.useEffect)(()=>{(async()=>{if(n){let e=await (0,F.f)(n);if(!Object.keys(e[0]).every(e=>Y.includes(e)))return o.oR.error("Key of excel does not match");p(e.map(e=>({team_name:e.name,description:e.description})))}})()},[n]);let u=async()=>{if(!m)return o.oR.error("Data is required");let e=m.map(e=>({team_name:e.team_name,description:e.description})),l=await (0,c.gf)(),r=l&&await (0,w.jZ)(l,e);if(!r)return o.oR.error("Create team error");s([...t,...r.data]),a()};return(0,l.jsxs)(i.EO,{children:[(0,l.jsx)(i.r7,{children:"Team"}),(0,l.jsxs)("div",{className:"w-[50vw]",children:[!n&&(0,l.jsx)(V.A,{setFile:d}),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsxs)("div",{className:"tbHead w-full grid grid-cols-3",children:[(0,l.jsx)("div",{className:"col-span-1",children:"Team Name"}),(0,l.jsx)("div",{className:"col-span-2",children:"Description"})]}),m&&m.map(e=>(0,l.jsxs)("div",{className:"tbBody w-full grid grid-cols-3",children:[(0,l.jsx)("div",{className:"col-span-1",children:e.team_name}),(0,l.jsx)("div",{className:"col-span-2",children:e.description})]}))]})]}),(0,l.jsxs)(i.ck,{children:[(0,l.jsx)(i.Rx,{onClick:u,className:"bg-blue-600 text-white cursor-pointer border-none",children:"Save"}),(0,l.jsx)(i.Zr,{onClick:a,className:"bg-red-600 text-white cursor-pointer border-none",children:"Cancel"})]})]})},Q=()=>{let{team:e}=(0,r.n)(),[a,t]=(0,x.useState)([]),{isAdmin:s}=(0,x.use)(f.B);return(0,x.useEffect)(()=>{e&&t(e)},[e]),s&&a&&(0,l.jsxs)("div",{className:"w-full col-span-7",children:[(0,l.jsx)("p",{className:"text-2xl font-semibold text-zinc-100 my-4",children:"Team"}),(0,l.jsx)("div",{className:"w-full h-auto grid grid-cols-4 gap-6 mb-4 px-2",children:a.map(e=>(0,l.jsx)("div",{className:"w-full h-10 bg-[#000] text-white hover:scale-105 border border-zinc-700 rounded-md flex flex-col items-center cursor-pointer transition-all",children:(0,l.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:e.team_name})},e.team_id))})]})};var ee=t(1083),ea=t(3915),et=t(6864);let es=(0,ea.Dk)().length?(0,ea.Sx)():(0,ea.Wp)({apiKey:"AIzaSyAm2lUj13YtHK82ZrJgnLgw4tIZKbCg6Hw",authDomain:"pmanager-9c26b.firebaseapp.com",projectId:"pmanager-9c26b",storageBucket:"pmanager-9c26b.firebasestorage.app",messagingSenderId:"80781043665",appId:"1:80781043665:web:c4e4759d0ffdd84a7522f0",measurementId:"G-5F088MXGTT"});function el(){let{isAdmin:e,isLog:a}=(0,x.use)(f.B),[t,r]=(0,x.useState)({project:!1,employee:!1,budget:!1,team:!1});return(0,x.useEffect)(()=>{s&&console.log("Firebase Analytics ready")},[]),a&&(0,l.jsxs)("div",{className:"container mx-auto p-8 pt-24",children:[(0,l.jsx)("div",{className:"mb-10 flex flex-wrap justify-start",children:e&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(X,{}),(0,l.jsx)(ee.A,{title:"+ Create Project",isOpen:t.project,openChange:e=>r({...t,project:e}),btnClass:"btn_create text-white cursor-pointer",Component:H}),(0,l.jsx)(ee.A,{title:"+ Create Employee",isOpen:t.employee,openChange:e=>r({...t,employee:e}),btnClass:"btn_create text-white cursor-pointer",Component:J}),(0,l.jsx)(ee.A,{title:"+ Create Team",isOpen:t.team,openChange:e=>r({...t,team:e}),btnClass:"btn_create text-white cursor-pointer",Component:$})]})}),(0,l.jsxs)("div",{className:"w-full grid gap-x-10 gap-y-5 grid-cols-7",children:[(0,l.jsx)(u,{}),(0,l.jsx)(q,{}),(0,l.jsx)(Q,{}),e&&(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"Task"}),(0,l.jsx)(v,{}),e&&(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"Employee"}),(0,l.jsx)(_,{})]})]})}(0,et.TT)().then(e=>{e&&(s=(0,et.P5)(es))})},6821:(e,a,t)=>{"use strict";t.d(a,{O:()=>s});let s=(0,t(5453).v)(e=>({task:null,setTask:a=>e({task:a}),statusTask:null,setStatusTask:a=>e({statusTask:a})}))},9958:(e,a,t)=>{"use strict";t.d(a,{Hh:()=>l,Jv:()=>s,KZ:()=>r});let s=async(e,a)=>(await fetch("".concat("https://api.fas1server.site/api","/auth/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:a})})).json(),l=async(e,a)=>(await fetch("".concat("https://api.fas1server.site/api","/auth/signup"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(a)})).json(),r=async(e,a)=>(await fetch("".concat("https://api.fas1server.site/api","/auth/update"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(a)})).json()}},e=>{var a=a=>e(e.s=a);e.O(0,[135,30,59,243,578,747,441,684,358],()=>a(2033)),_N_E=e.O()}]);